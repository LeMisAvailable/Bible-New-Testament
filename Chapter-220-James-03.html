<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>James 3 - Taming the Tongue</title>
    <style>
        body { font-family: 'Georgia', serif; max-width: 800px; margin: 0 auto; padding: 20px; padding-bottom: calc(100px + env(safe-area-inset-bottom, 20px)); background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); min-height: 100vh; -webkit-overflow-scrolling: touch; }
        .song-container { background: linear-gradient(145deg, #ffffff 0%, #f0f0f0 100%); padding: 30px; padding-bottom: 50px; border-radius: 15px; box-shadow: 0 15px 50px rgba(0,0,0,0.3); }
        h1 { color: #2c3e50; text-align: center; border-bottom: 3px solid #8b0000; padding-bottom: 15px; margin-bottom: 5px; }
        .subtitle { text-align: center; color: #666; font-style: italic; margin-bottom: 20px; }
        h2 { color: #8b0000; margin-top: 25px; font-size: 1.1em; }
        .verse { background: #f8f9fa; padding: 15px; border-left: 4px solid #8b0000; margin: 15px 0; line-height: 1.8; }
        .chorus { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 10px; margin: 20px 0; font-style: italic; text-align: center; line-height: 2; }
        .bridge { background: #fff3cd; padding: 15px; border-left: 4px solid #ffc107; margin: 15px 0; line-height: 1.8; }
        .finale { background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); color: #d4af37; padding: 20px; border-radius: 10px; margin: 20px 0; text-align: center; line-height: 2; font-style: italic; }
        .scripture-ref { text-align: center; color: #8b0000; font-size: 0.95em; margin-bottom: 10px; font-weight: bold; }
        .duration { text-align: center; color: #6c757d; font-size: 0.9em; margin-bottom: 20px; }
        a.back-link { display: inline-block; margin-bottom: 20px; color: #8b0000; text-decoration: none; font-weight: bold; }
        a.back-link:hover { text-decoration: underline; }
        .copy-btn { display: block; margin: 20px auto; padding: 12px 30px; background: linear-gradient(135deg, #8b0000 0%, #cc0000 100%); color: white; border: none; border-radius: 25px; cursor: pointer; font-size: 1em; font-weight: bold; transition: transform 0.2s, box-shadow 0.2s; }
        .copy-btn:hover { transform: translateY(-2px); box-shadow: 0 5px 20px rgba(139,0,0,0.4); }
        .copy-btn:active { transform: translateY(0); }
        .copied { background: linear-gradient(135deg, #28a745 0%, #34ce57 100%); }
        .suno-format { display: none; }
        .carousel-item { display: none; }
        .carousel-item.active { display: block; }
        .intro { background: linear-gradient(135deg, #2d5016 0%, #4a7c23 100%); color: white; padding: 20px; border-radius: 10px; margin: 20px 0; text-align: center; line-height: 2; }

        .listen-btn { display: inline-flex; align-items: center; gap: 8px; margin: 15px auto; padding: 14px 28px; background: linear-gradient(135deg, #1e3a5f 0%, #2d5a8c 100%); color: white; border: none; border-radius: 30px; cursor: pointer; font-size: 1em; font-weight: 600; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(30,58,95,0.3); }
        .listen-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 25px rgba(30,58,95,0.4); background: linear-gradient(135deg, #2d5a8c 0%, #3d6a9c 100%); }
        .listen-btn:active { transform: translateY(0); }
        .listen-btn svg { width: 20px; height: 20px; fill: currentColor; }
        .listen-btn.playing { background: linear-gradient(135deg, #28a745 0%, #34ce57 100%); }
        .listen-btn-container { text-align: center; margin: 20px 0; }
        #audio-toast { display: none; position: fixed; top: 20px; left: 50%; transform: translateX(-50%); background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: white; padding: 12px 24px; border-radius: 8px; box-shadow: 0 4px 20px rgba(0,0,0,0.3); z-index: 9999; font-size: 0.9em; text-align: center; max-width: 90%; }
        #audio-player { display: none; }
    </style>
</head>
<body>
    <div class="song-container">
        <div class="video-container" style="text-align: center; margin-bottom: 20px;">
            <div id="top-videos" style="display: flex; justify-content: center; gap: 10px; flex-wrap: wrap;">
                <iframe id="chapter-video-1" width="48%" height="200" src="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen style="max-width: 380px; border-radius: 10px;"></iframe>
                <iframe id="chapter-video-2" width="48%" height="200" src="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen style="max-width: 380px; border-radius: 10px;"></iframe>
            </div>
        </div>

        <script>
        (function() {
            const chapterName = window.location.pathname.split('/').pop().replace('.html', '');
            fetch('setup/videolinks.json')
                .then(response => response.json())
                .then(data => {
                    const videoIds = (data[chapterName] || '9jo51nJrO0k').split(' ');
                    // Top 2 videos
                    document.getElementById('chapter-video-1').src = 'https://www.youtube.com/embed/' + (videoIds[0] || '9jo51nJrO0k');
                    document.getElementById('chapter-video-2').src = 'https://www.youtube.com/embed/' + (videoIds[1] || videoIds[0] || '9jo51nJrO0k');
                    // Bottom carousel
                    const carousel = document.getElementById('video-carousel');
                    if (carousel) {
                        carousel.innerHTML = videoIds.map((id, i) =>
                            '<div class="carousel-item' + (i === 0 ? ' active' : '') + '">' +
                            '<iframe width="100%" height="200" src="https://www.youtube.com/embed/' + id + '" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen style="border-radius: 10px;"></iframe>' +
                            '</div>'
                        ).join('');
                        // Update video count
                        document.getElementById('video-count').textContent = '1 / ' + videoIds.length;
                        // Initialize carousel display
                        document.addEventListener('DOMContentLoaded', () => { if (typeof showSlide === 'function') showSlide(0); });
                        if (document.readyState === 'complete') { setTimeout(() => { if (typeof showSlide === 'function') showSlide(0); }, 100); }
                    }
                })
                .catch(() => {
                    document.getElementById('chapter-video-1').src = 'https://www.youtube.com/embed/9jo51nJrO0k';
                    document.getElementById('chapter-video-2').src = 'https://www.youtube.com/embed/9jo51nJrO0k';
                    // Fallback carousel with 2 videos
                    const carousel = document.getElementById('video-carousel');
                    if (carousel) {
                        carousel.innerHTML = '<div class="carousel-item active"><iframe width="100%" height="200" src="https://www.youtube.com/embed/9jo51nJrO0k" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen style="border-radius: 10px;"></iframe></div><div class="carousel-item"><iframe width="100%" height="200" src="https://www.youtube.com/embed/Hfm94aHAbYQ" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen style="border-radius: 10px;"></iframe></div>';
                        document.getElementById('video-count').textContent = '1 / 2';
                    }
                });
        })();
        </script>

        <h1>Taming the Tongue</h1>
        <p class="subtitle">James Chapter 3</p>
        <p class="scripture-ref">Scripture: James 3</p>
        <p class="duration">Duration: ~2 minutes | Style: Devotional Ballad</p>

        <div class="listen-btn-container">
            <button class="listen-btn" onclick="playAudio()">
                <svg viewBox="0 0 24 24" id="play-icon"><path d="M8 5v14l11-7z"/></svg>
                <span id="listen-text">Listen Now</span>
            </button>
            <audio id="audio-player"></audio>
        </div>
        <div id="audio-toast">We will make this audio available soon</div>
        <script>
        let isPlaying = false;
        const audioPlayer = document.getElementById('audio-player');
        const listenBtn = document.querySelector('.listen-btn');
        const playIcon = document.getElementById('play-icon');
        const listenText = document.getElementById('listen-text');

        function getChapterName() {
            return window.location.pathname.split('/').pop().replace('.html', '');
        }

        function showAudioToast() {
            const toast = document.getElementById('audio-toast');
            toast.style.display = 'block';
            setTimeout(() => { toast.style.display = 'none'; }, 3000);
        }

        async function playAudio() {
            if (isPlaying) {
                audioPlayer.pause();
                isPlaying = false;
                listenBtn.classList.remove('playing');
                playIcon.innerHTML = '<path d="M8 5v14l11-7z"/>';
                listenText.textContent = 'Listen Now';
                return;
            }
            try {
                const response = await fetch('setup/audiolinks.json');
                const audiolinks = await response.json();
                const chapterName = getChapterName();
                const audioFile = audiolinks[chapterName];
                if (audioFile && audioFile !== 'sample-audio-file.wav') {
                    const audioPath = 'music/' + audioFile;
                    const checkResponse = await fetch(audioPath, { method: 'HEAD' });
                    if (checkResponse.ok) {
                        audioPlayer.src = audioPath;
                        audioPlayer.play();
                        isPlaying = true;
                        listenBtn.classList.add('playing');
                        playIcon.innerHTML = '<path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>';
                        listenText.textContent = 'Pause';
                        return;
                    }
                }
                showAudioToast();
            } catch (e) { showAudioToast(); }
        }

        audioPlayer.addEventListener('ended', () => {
            isPlaying = false;
            listenBtn.classList.remove('playing');
            playIcon.innerHTML = '<path d="M8 5v14l11-7z"/>';
            listenText.textContent = 'Listen Now';
        });
        </script>




        <h2>[Intro]</h2>
        <div class="intro">
We shine bright through the sacred Word,<br>
James, chapter three is heard,<br>
Faith without works is dead they say,<br>
Now tame the tongue that leads astray,<br>
Pure wisdom lights the righteous way.
        </div>

        <h2>[Verse 1]</h2>
        <div class="verse">
The tongue is small but boasts of most,<br>
Like a spark that burns the coast,<br>
A bit controls the horse,<br>
A rudder steers the course.<br>
Yet no one tames this flame,<br>
That blesses and curses same.
        </div>

        <h2>[Chorus]</h2>
        <div class="chorus">
Wisdom from above is pure,<br>
Peaceful gentle and secure,<br>
No bitter envy pride,<br>
Let heaven be your guide.
        </div>

        <h2>[Verse 2]</h2>
        <div class="verse">
Can a spring pour sweet and salt,<br>
Can a fig tree be at fault,<br>
From one mouth blessings flow,<br>
And curses this we know.<br>
The fruit of right is peace,<br>
Sown when conflicts cease.
        </div>

        <h2>[Chorus]</h2>
        <div class="chorus">
Wisdom from above is pure,<br>
Peaceful gentle and secure,<br>
No bitter envy pride,<br>
Let heaven be your guide.
        </div>

        <h2>[Bridge]</h2>
        <div class="bridge">
Earthly wisdom breeds discord,<br>
But wisdom from the Lord,<br>
Full of mercy fruit so bright,<br>
Sincere and walking right.
        </div>

        <h2>[Outro]</h2>
        <div class="finale">
When fearful thoughts are intertwined,<br>
You calm the storm inside my mind.<br>
Lord, though I cannot see Your hand,<br>
I trust Your heart and all You've planned.
        </div>

        <h2>[Chorus]</h2>
        <div class="chorus">
Amen.
        </div>

        <h2>[Pause]</h2>
        <div class="narration" style="background: linear-gradient(135deg, #2c3e50 0%, #1a252f 100%); color: #f0e6d3; padding: 20px; border-radius: 10px; margin: 20px 0; font-style: italic; text-align: center; line-height: 2;">
[Spoken Word, Deep Male Baritone, Calm, Reverent]<br>
Darkness abates, vanquished instantly;<br>
Divine Light eternally embraces all now;<br>
Drawing many into lasting, inner, nurturing, divine peace;<br>
Always transforming, inspiring, lifting, mending, uniting, saving, illuminating, comforting, and liberating.
        </div>

        
        <button class="copy-btn" onclick="copySunoFormat()">Copy Lyrics</button>

        <span id="suno-tags" style="display:none;">(Dramatic Orchestral, Cinematic, Majestic, Church Choir Organ, Dramatic Music, Church Bells, Easy to sing along, Clear pronunciation, Devotional Ballad, Emotional, Orchestral, Reverent)</span>

        <script>
        function copySunoFormat() {
            let text = document.getElementById('suno-tags').textContent + '\n\n';
            const sections = document.querySelectorAll('.song-container h2');
            sections.forEach(h2 => {
                const sectionName = h2.textContent.trim();
                // Only process song sections (starting with [)
                if (!sectionName.startsWith('[')) return;
                
                const nextEl = h2.nextElementSibling;
                if (nextEl) {
                    text += sectionName + '\n';
                    let html = nextEl.innerHTML;
                    html = html.replace(/<br\s*\/?>/gi, '\n');
                    const temp = document.createElement('div');
                    temp.innerHTML = html;
                    let content = temp.textContent.trim();
                    content = content.replace(/\n\s*\n/g, '\n');
                    text += content + '\n\n';
                }
            });
            navigator.clipboard.writeText(text.trim()).then(() => {
                const btn = document.querySelector('.copy-btn');
                btn.textContent = 'Copied!';
                btn.classList.add('copied');
                setTimeout(() => {
                    btn.textContent = 'Copy Lyrics';
                    btn.classList.remove('copied');
                }, 2000);
            });
        }
    </script>

        <!-- Video Carousel -->
        <div class="video-carousel-section" style="margin-top: 30px; padding-top: 20px; border-top: 2px solid #ddd;">
            <h2 style="text-align: center; color: #2c3e50; margin-bottom: 15px;">Videos</h2>
            <div id="carousel-wrapper" style="position: relative; max-width: 500px; margin: 0 auto;">
                <div id="carousel-controls" style="display: flex; justify-content: center; align-items: center; gap: 15px; margin-bottom: 15px;">
                    <button onclick="prevVideo()" style="background: linear-gradient(135deg, #8b0000 0%, #cc0000 100%); color: white; border: 3px solid #fff; border-radius: 50%; width: 56px; height: 56px; cursor: pointer; font-size: 28px; font-weight: bold; box-shadow: 0 4px 15px rgba(139,0,0,0.4); display: flex; align-items: center; justify-content: center;">&#10094;</button>
                    <span id="video-count" style="font-weight: bold; color: #333; font-size: 1.1em; background: #f0f0f0; padding: 8px 16px; border-radius: 20px;">1 / 1</span>
                    <button onclick="nextVideo()" style="background: linear-gradient(135deg, #8b0000 0%, #cc0000 100%); color: white; border: 3px solid #fff; border-radius: 50%; width: 56px; height: 56px; cursor: pointer; font-size: 28px; font-weight: bold; box-shadow: 0 4px 15px rgba(139,0,0,0.4); display: flex; align-items: center; justify-content: center;">&#10095;</button>
                </div>
                <div id="video-carousel" style="overflow: hidden;">
                    <!-- Videos will be populated by JavaScript -->
                </div>
            </div>
        </div>

        <script>
        let currentSlide = 0;
        function showSlide(n) {
            const items = document.querySelectorAll('.carousel-item');
            if (items.length === 0) return;
            currentSlide = (n + items.length) % items.length;
            items.forEach((item, i) => {
                item.style.display = i === currentSlide ? 'block' : 'none';
            });
            document.getElementById('video-count').textContent = (currentSlide + 1) + ' / ' + items.length;
        }
        function nextVideo() { showSlide(currentSlide + 1); }
        function prevVideo() { showSlide(currentSlide - 1); }
        </script>

        <!-- iOS Safari scroll spacer - inside container for proper rendering -->
        <div style="height: 120px; width: 100%;"></div>
        
    </div><!-- end song-container -->
    
    <!-- Additional body spacer for iOS safe area -->
    <div style="height: 80px;"></div>
</body>
</html>
